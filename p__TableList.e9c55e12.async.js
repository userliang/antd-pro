(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[947],{57844:function(pe,E,n){"use strict";n.r(E),n.d(E,{default:function(){return se}});var fe=n(57338),N=n(25084),me=n(57663),B=n(71577),he=n(47673),Y=n(4107),z=n(93224),v=n(57337),g=n(8870),ve=n(34792),R=n(48086),y=n(3182),K=n(94043),c=n.n(K),H=n(49101),m=n(67294),J=n(67265),Q=n(30348),X=n(96459),ge=n(71194),q=n(50146),L=n(3843),_=n(5966),s=n(85893),ee=function(t){return(0,s.jsx)(L.L,{stepsProps:{size:"small"},stepsFormRender:function(e,u){return(0,s.jsx)(q.Z,{width:640,bodyStyle:{padding:"32px 40px 48px"},destroyOnClose:!0,title:"\u89C4\u5219\u914D\u7F6E",visible:t.updateModalVisible,footer:u,onCancel:function(){t.onCancel()},children:e})},onFinish:t.onSubmit,children:(0,s.jsx)(L.L.StepForm,{initialValues:{name:t.values.name,desc:t.values.desc},title:"\u57FA\u672C\u4FE1\u606F",children:(0,s.jsx)(_.Z,{name:"name",label:"\u89C4\u5219\u540D\u79F0",width:"md",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u89C4\u5219\u540D\u79F0\uFF01"}]})})})},te=ee,U=n(2489);function ye(r){return S.apply(this,arguments)}function S(){return S=_asyncToGenerator(_regeneratorRuntime.mark(function r(t){return _regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/api/currentUser",_objectSpread({method:"GET"},t||{})));case 1:case"end":return e.stop()}},r)})),S.apply(this,arguments)}function xe(r){return w.apply(this,arguments)}function w(){return w=_asyncToGenerator(_regeneratorRuntime.mark(function r(t){return _regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/api/login/outLogin",_objectSpread({method:"POST"},t||{})));case 1:case"end":return e.stop()}},r)})),w.apply(this,arguments)}function Re(r,t){return T.apply(this,arguments)}function T(){return T=_asyncToGenerator(_regeneratorRuntime.mark(function r(t,a){return _regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",request("/api/login/account",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:t},a||{})));case 1:case"end":return u.stop()}},r)})),T.apply(this,arguments)}function Se(r){return b.apply(this,arguments)}function b(){return b=_asyncToGenerator(_regeneratorRuntime.mark(function r(t){return _regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/api/notices",_objectSpread({method:"GET"},t||{})));case 1:case"end":return e.stop()}},r)})),b.apply(this,arguments)}function re(r,t){return j.apply(this,arguments)}function j(){return j=(0,y.Z)(c().mark(function r(t,a){return c().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,U.WY)("/api/rule",(0,g.Z)({method:"GET",params:(0,g.Z)({},t)},a||{})));case 1:case"end":return u.stop()}},r)})),j.apply(this,arguments)}function ne(r){return C.apply(this,arguments)}function C(){return C=(0,y.Z)(c().mark(function r(t){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,U.WY)("/api/rule",(0,g.Z)({method:"PUT"},t||{})));case 1:case"end":return e.stop()}},r)})),C.apply(this,arguments)}function we(r){return Z.apply(this,arguments)}function Z(){return Z=_asyncToGenerator(_regeneratorRuntime.mark(function r(t){return _regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/api/rule",_objectSpread({method:"POST"},t||{})));case 1:case"end":return e.stop()}},r)})),Z.apply(this,arguments)}function Te(r){return $.apply(this,arguments)}function $(){return $=_asyncToGenerator(_regeneratorRuntime.mark(function r(t){return _regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/api/rule",_objectSpread({method:"DELETE"},t||{})));case 1:case"end":return e.stop()}},r)})),$.apply(this,arguments)}var be=null,ae=function(){var r=(0,y.Z)(c().mark(function t(a){var e;return c().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return e=R.default.loading("Configuring"),l.prev=1,l.next=4,ne({name:a.name,desc:a.desc,key:a.key});case 4:return e(),R.default.success("Configuration is successful"),l.abrupt("return",!0);case 9:return l.prev=9,l.t0=l.catch(1),e(),R.default.error("Configuration failed, please try again!"),l.abrupt("return",!1);case 14:case"end":return l.stop()}},t,null,[[1,9]])}));return function(a){return r.apply(this,arguments)}}(),je=null,ue=function(){var t=(0,m.useState)(!1),a=(0,v.Z)(t,2),e=a[0],u=a[1],l=(0,m.useState)(!1),F=(0,v.Z)(l,2),le=F[0],G=F[1],ie=(0,m.useState)(!1),A=(0,v.Z)(ie,2),I=A[0],V=A[1],P=(0,m.useRef)(),oe=(0,m.useState)(),D=(0,v.Z)(oe,2),o=D[0],x=D[1],ce=(0,m.useState)([]),O=(0,v.Z)(ce,2),Ce=O[0],de=O[1],M=[{title:"Rule name",dataIndex:"name",tip:"The rule name is the unique key",render:function(p,i){return(0,s.jsx)("a",{onClick:function(){x(i),V(!0)},children:p})}},{title:"Description",dataIndex:"desc",valueType:"textarea"},{title:"Status",dataIndex:"status",hideInForm:!0,valueEnum:{0:{text:"Shut down",status:"Default"},1:{text:"Running",status:"Processing"},2:{text:"Online",status:"Success"},3:{text:"Abnormal",status:"Error"}}},{title:"Last scheduled time",sorter:!0,dataIndex:"updatedAt",valueType:"dateTime",renderFormItem:function(p,i,h){var k=i.defaultRender,f=(0,z.Z)(i,["defaultRender"]),W=h.getFieldValue("status");return"".concat(W)==="0"?!1:"".concat(W)==="3"?(0,s.jsx)(Y.Z,(0,g.Z)((0,g.Z)({},f),{},{placeholder:"Please enter the reason for the exception!"})):k(p)}},{title:"Operating",dataIndex:"option",valueType:"option",render:function(p,i){return[(0,s.jsx)("a",{onClick:function(){G(!0),x(i)},children:"Configuration"},"config"),(0,s.jsx)("a",{href:"https://procomponents.ant.design/",children:"Subscribe to alerts"},"subscribeAlert")]}}];return(0,s.jsxs)(J.ZP,{children:[(0,s.jsx)(Q.ZP,{headerTitle:"Enquiry form",actionRef:P,rowKey:"key",search:{labelWidth:120},toolBarRender:function(){return[(0,s.jsxs)(B.Z,{type:"primary",onClick:function(){u(!0)},children:[(0,s.jsx)(H.Z,{})," New"]},"primary")]},request:re,columns:M,rowSelection:{onChange:function(p,i){de(i)}}}),(0,s.jsx)(te,{onSubmit:function(){var d=(0,y.Z)(c().mark(function p(i){var h;return c().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,ae(i);case 2:h=f.sent,h&&(G(!1),x(void 0),P.current&&P.current.reload());case 4:case"end":return f.stop()}},p)}));return function(p){return d.apply(this,arguments)}}(),onCancel:function(){G(!1),I||x(void 0)},updateModalVisible:le,values:o||{}}),(0,s.jsx)(N.Z,{width:600,visible:I,onClose:function(){x(void 0),V(!1)},closable:!1,children:(o==null?void 0:o.name)&&(0,s.jsx)(X.Z,{column:2,title:o==null?void 0:o.name,request:(0,y.Z)(c().mark(function d(){return c().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",{data:o||{}});case 1:case"end":return i.stop()}},d)})),params:{id:o==null?void 0:o.name},columns:M})})]})},se=ue}}]);
